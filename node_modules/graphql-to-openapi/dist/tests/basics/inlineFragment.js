"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var fs_1 = require("fs");
var path = require("path");
var index_1 = require("../../index");
var assert = require("assert");
var yaml_1 = require("yaml");
describe('inlineFragment', function () {
    it('should produce a valid openapi spec', function () {
        var schema = (0, fs_1.readFileSync)(path.join(__dirname, 'inlineFragmentSchema.graphql')).toString();
        var inputQueryFilename = path.join(__dirname, 'inlineFragment.graphql');
        var query = (0, fs_1.readFileSync)(inputQueryFilename).toString();
        // eslint-disable-next-line @typescript-eslint/no-var-requires
        var expectedOutputYaml = (0, fs_1.readFileSync)(path.join(__dirname, 'inlineFragment.yaml')).toString();
        var output = (0, index_1.graphqlToOpenApi)({
            schema: schema,
            query: query,
        });
        var actualOutput = output.openApiSchema;
        var actualOutputYaml = (0, yaml_1.stringify)(JSON.parse(JSON.stringify(actualOutput)), {
            sortMapEntries: true,
        });
        assert.ok(!!actualOutputYaml);
        assert.equal(actualOutputYaml, expectedOutputYaml);
    });
});
